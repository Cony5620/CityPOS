

@model IEnumerable<SaleViewModel>
@using Microsoft.AspNetCore.Http
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor

@{
    // Check if the user is in the "Admin" role
    var isAdmin = HttpContextAccessor.HttpContext.User.IsInRole("Admin");
}

<!DOCTYPE html>
<html>
<head>
    <title>Home</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* General container for the image and tips */
        /* General container for the image and tips */
        .welcome-content {
            display: flex;
            align-items: flex-start;
            margin-top: 20px;
            gap: 20px; /* Space between the image and the tips */
        }

        /* Image styling */
        .image-container {
            flex: 2; /* Larger proportion for the image */
        }

            .image-container img {
                max-width: 100%; /* Fill its container */
                height: auto;
                border-radius: 10px; /* Rounded corners */
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Subtle shadow */
            }

        /* Skincare tips section */
        .skincare-note {
            flex: 1; /* Smaller proportion for the tips */
            background-color: #fff5f8; /* Soft pink background */
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Light shadow */
        }

            /* Heading for the skincare note */
            .skincare-note h2 {
                color: #e75480; /* Warm pink */
                margin-bottom: 10px;
            }

            /* List styling */
            .skincare-note ul {
                list-style-type: none; /* Removes default bullets */
                padding-left: 0;
                font-size: 0.9rem; /* Smaller font size for compactness */
                line-height: 1.4; /* Slightly less spacing */
            }

                .skincare-note ul li {
                    margin-bottom: 8px;
                }

                    .skincare-note ul li strong {
                        color: #d63384; /* Highlight key points in pink */
                    }

        .citypos-guarantee{
            color: #d63384;
        }
    </style>
</head>
<body>
    @if (isAdmin)
    {
        <div style="width: 70%; margin: auto; text-align: center;">
            <h1>Weekly Sales Report</h1>

            @if (Model != null && Model.Any())
            {
                <canvas id="salesChart"></canvas>
            }
            else
            {
                <p>No sales data available to display.</p>
            }
        </div>

        @if (Model != null && Model.Any())
        {
            <script>
                // Prepare the data for the chart
                const labels = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model.Select(s => s.Week)));
                const data = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model.Select(s => s.SalesAmount)));

                // Render the chart
                const ctx = document.getElementById('salesChart').getContext('2d');
                const salesChart = new Chart(ctx, {
                    type: 'line', // Line chart for weekly data
                    data: {
                        labels: labels, // Weeks
                        datasets: [{
                            label: 'Sales Amount',
                            data: data, // Sales Amount per week
                            backgroundColor: 'rgba(75, 192, 192, 0.2)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            </script>
        }
    }
    else
    {
      @*   <div class="text-center">
            <h1 class="display-4">Welcome</h1>
            <p>Take a moment to treat yourself—because you deserve to feel beautiful, inside and out.</p>
            <div class="welcome-content">
                <div class="image-container">
                    <img src="~/images/home.jpg" alt="Welcome Image" />
                </div>
                <div class="skincare-note">
                    <h2>Your Glow-Up Routine</h2>
                    <ul>
                        <li><strong>Cleanse:</strong> Say goodbye to dirt and hello to fresh skin! A gentle cleanse morning and night will keep you glowing.</li>
                        <li><strong>Exfoliate:</strong> Scrub away the old, reveal the new! Exfoliate 1-2 times a week to keep your skin radiant and smooth.</li>
                        <li><strong>Moisturize:</strong> Hydrate, baby! Give your skin the love it deserves with a daily dose of moisturizer for that soft, dewy look.</li>
                        <li><strong>Sunscreen:</strong> Protect your magic! SPF 30+ every day is your best friend—keep that youthful glow all year long.</li>
                    </ul>
                </div>
            </div>
        </div> *@

        <div class="text-center">
            <h1 class="display-4">Welcome</h1>
            <p>Take a moment to treat yourself—because you deserve to feel beautiful, inside and out.</p>
            <div style="display: flex; align-items: flex-start; justify-content: center; gap: 30px; margin-top: 20px;">
                <img src="~/images/home.jpg" alt="Welcome Image" style="width: 50%; height: auto; border-radius: 10px;">

                <div style="flex: 1;">
                    <div class="skincare-note">
                        <h2>Your Glow-Up Routine</h2>
                        <ul>
                            <li><strong>Cleanse:</strong> Say goodbye to dirt and hello to fresh skin! A gentle cleanse morning and night will keep you glowing.</li>
                            <li><strong>Exfoliate:</strong> Scrub away the old, reveal the new! Exfoliate 1-2 times a week to keep your skin radiant and smooth.</li>
                            <li><strong>Moisturize:</strong> Hydrate, baby! Give your skin the love it deserves with a daily dose of moisturizer for that soft, dewy look.</li>
                            <li><strong>Sunscreen:</strong> Protect your magic! SPF 30+ every day is your best friend—keep that youthful glow all year long.</li>
                        </ul>
                    </div>

                    <!-- CityPOS Guarantee Paragraph -->
                    <div class="citypos-guarantee" style="margin-top: 30px;">
                       
                        <p>
                            At CityPOS, we believe every individual deserves skincare products they can trust.
                            Our products are crafted with care, ensuring safety, authenticity, and superior quality
                            to give your skin the love it deserves. We guarantee that each product meets the highest
                            standards, free from harmful ingredients, and dermatologically tested to ensure they’re
                            gentle and effective. With CityPOS, your glow isn’t just skin-deep—it’s a reflection of
                            confidence and care, backed by our promise of excellence.
                        </p>
                    </div>
                </div>
            </div>
        </div>
 }
</body>
</html>
